<% cache [@game.players, @round, @submissions] do %>
  <div id='players'>
    <ul class="list-group list-group-flush">
      <% @game.players.each do |player| %>
        <li class="list-group-item">
          <% if player == @round.czar %>
            <%= image_tag 'crown.png' %>
          <% end %>

          <% if @submissions.any? { |s| s.player_id == player.id } %>
            &#10004;
          <% end %>

          <span class='player-name d-inline-block text-truncate'>
            <%= player %>
          </span>

          <% winning_submissions = player.winning_submissions_for(@game).count %>
          <% if winning_submissions > 0 %>
            <span class="badge badge-light badge-pill float-right">
              <%= winning_submissions %>
            </span>
          <% end %>
        </li>
      <% end %>
    </ul>
  </div>
<% end %>
